<Window
    AllowsTransparency="True"
    Background="Transparent"
    Height="700"
    MinHeight="500"
    MinWidth="800"
    ResizeMode="CanResize"
    Title="Обработка изображения"
    Width="1200"
    WindowStartupLocation="CenterScreen"
    WindowStyle="None"
    x:Class="Cellverse.View.ImageImportWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml">

    <Border BorderThickness="0">
        <Border
            Background="{StaticResource BgDark}"
            BorderBrush="{StaticResource BorderColor}"
            BorderThickness="1"
            CornerRadius="12">
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="44" />
                    <RowDefinition Height="*" />
                    <RowDefinition Height="Auto" />
                </Grid.RowDefinitions>

                <!--  Title Bar  -->
                <Border
                    Background="{StaticResource BgPanel}"
                    BorderBrush="{StaticResource BorderColor}"
                    BorderThickness="0,0,0,1"
                    CornerRadius="12,12,0,0"
                    Grid.Row="0"
                    MouseLeftButtonDown="TitleBar_MouseLeftButtonDown">
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*" />
                            <ColumnDefinition Width="Auto" />
                        </Grid.ColumnDefinitions>

                        <!--  Иконка и заголовок  -->
                        <StackPanel
                            Grid.Column="0"
                            Margin="16,0,0,0"
                            Orientation="Horizontal"
                            VerticalAlignment="Center">
                            <Border
                                Background="{StaticResource AccentBlue}"
                                CornerRadius="6"
                                Height="24"
                                Margin="0,0,12,0"
                                Width="24">
                                <TextBlock
                                    FontSize="14"
                                    HorizontalAlignment="Center"
                                    Text="🧬"
                                    VerticalAlignment="Center" />
                            </Border>
                            <TextBlock
                                FontSize="15"
                                FontWeight="SemiBold"
                                Foreground="{StaticResource TextPrimary}"
                                Text="Обработка изображения"
                                VerticalAlignment="Center" />
                        </StackPanel>

                        <!--  Кнопка закрытия  -->
                        <Button
                            Click="CloseButton_Click"
                            Grid.Column="1"
                            Height="44"
                            Style="{StaticResource TitleBarCloseButtonStyle}"
                            Width="46"
                            x:Name="CloseButton">
                            <Path
                                Data="M 0,0 L 10,10 M 10,0 L 0,10"
                                Stretch="None"
                                Stroke="White"
                                StrokeThickness="1.5" />
                        </Button>
                    </Grid>
                </Border>

                <!--  Preview Panel  -->
                <ScrollViewer
                    Background="{StaticResource BgDark}"
                    Grid.Row="1"
                    HorizontalScrollBarVisibility="Disabled"
                    VerticalScrollBarVisibility="Auto">
                    <StackPanel Margin="24,24,24,16">
                        <!--  Заголовок секции  -->
                        <TextBlock
                            FontSize="22"
                            FontWeight="Bold"
                            Foreground="{StaticResource TextPrimary}"
                            Margin="0,0,0,20"
                            Text="Варианты обработки" />

                        <!--  Grid с карточками  -->
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*" />
                                <ColumnDefinition Width="*" />
                                <ColumnDefinition Width="*" />
                            </Grid.ColumnDefinitions>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto" />
                                <RowDefinition Height="Auto" />
                                <RowDefinition Height="Auto" />
                            </Grid.RowDefinitions>

                            <!--  Original  -->
                            <Border
                                Background="{StaticResource BgCard}"
                                BorderBrush="{StaticResource BorderColor}"
                                BorderThickness="1"
                                CornerRadius="12"
                                Grid.Column="0"
                                Grid.Row="0"
                                Margin="0,0,12,16"
                                Padding="16">
                                <StackPanel>
                                    <TextBlock
                                        Margin="0,0,0,12"
                                        Style="{StaticResource SubHeaderText}"
                                        Text="📸 Original" />
                                    <Border
                                        Background="{StaticResource BgPanel}"
                                        BorderBrush="{StaticResource BorderColor}"
                                        BorderThickness="1"
                                        CornerRadius="8"
                                        Margin="0,0,0,12"
                                        Padding="8">
                                        <Image
                                            Height="220"
                                            Stretch="Uniform"
                                            x:Name="OriginalImg" />
                                    </Border>
                                    <Button
                                        Click="OpenButton_OnClick"
                                        Content="📂 Открыть изображение"
                                        Style="{StaticResource BtnPrimary}"
                                        x:Name="OpenButton" />
                                </StackPanel>
                            </Border>

                            <!--  Canny  -->
                            <Border
                                Background="{StaticResource BgCard}"
                                BorderBrush="{StaticResource BorderColor}"
                                BorderThickness="1"
                                CornerRadius="12"
                                Grid.Column="1"
                                Grid.Row="0"
                                Margin="6,0,6,16"
                                Padding="16">
                                <StackPanel>
                                    <TextBlock
                                        Margin="0,0,0,12"
                                        Style="{StaticResource SubHeaderText}"
                                        Text="🔍 Canny Edges" />
                                    <Border
                                        Background="{StaticResource BgPanel}"
                                        BorderBrush="{StaticResource BorderColor}"
                                        BorderThickness="1"
                                        CornerRadius="8"
                                        Margin="0,0,0,12"
                                        Padding="8">
                                        <Image
                                            Height="220"
                                            Stretch="Uniform"
                                            x:Name="CannyImg" />
                                    </Border>
                                    <Button
                                        Click="SelectCanny_Click"
                                        Content="✓ Выбрать"
                                        Style="{StaticResource BtnBlue}" />
                                </StackPanel>
                            </Border>

                            <!--  Adaptive Threshold  -->
                            <Border
                                Background="{StaticResource BgCard}"
                                BorderBrush="{StaticResource BorderColor}"
                                BorderThickness="1"
                                CornerRadius="12"
                                Grid.Column="2"
                                Grid.Row="0"
                                Margin="12,0,0,16"
                                Padding="16">
                                <StackPanel>
                                    <TextBlock
                                        Margin="0,0,0,12"
                                        Style="{StaticResource SubHeaderText}"
                                        Text="⚡ Adaptive Threshold" />
                                    <Border
                                        Background="{StaticResource BgPanel}"
                                        BorderBrush="{StaticResource BorderColor}"
                                        BorderThickness="1"
                                        CornerRadius="8"
                                        Margin="0,0,0,12"
                                        Padding="8">
                                        <Image
                                            Height="220"
                                            Stretch="Uniform"
                                            x:Name="ThresholdImg" />
                                    </Border>
                                    <Button
                                        Click="SelectThreshold_Click"
                                        Content="✓ Выбрать"
                                        Style="{StaticResource BtnBlue}" />
                                </StackPanel>
                            </Border>

                            <!--  Sobel  -->
                            <Border
                                Background="{StaticResource BgCard}"
                                BorderBrush="{StaticResource BorderColor}"
                                BorderThickness="1"
                                CornerRadius="12"
                                Grid.Column="0"
                                Grid.Row="1"
                                Margin="0,0,12,16"
                                Padding="16">
                                <StackPanel>
                                    <TextBlock
                                        Margin="0,0,0,12"
                                        Style="{StaticResource SubHeaderText}"
                                        Text="🌊 Sobel Edges" />
                                    <Border
                                        Background="{StaticResource BgPanel}"
                                        BorderBrush="{StaticResource BorderColor}"
                                        BorderThickness="1"
                                        CornerRadius="8"
                                        Margin="0,0,0,12"
                                        Padding="8">
                                        <Image
                                            Height="220"
                                            Stretch="Uniform"
                                            x:Name="SobelImg" />
                                    </Border>
                                    <Button
                                        Click="SelectSobel_Click"
                                        Content="✓ Выбрать"
                                        Style="{StaticResource BtnBlue}" />
                                </StackPanel>
                            </Border>

                            <!--  Thick Edges  -->
                            <Border
                                Background="{StaticResource BgCard}"
                                BorderBrush="{StaticResource BorderColor}"
                                BorderThickness="1"
                                CornerRadius="12"
                                Grid.Column="1"
                                Grid.Row="1"
                                Margin="6,0,6,16"
                                Padding="16">
                                <StackPanel>
                                    <TextBlock
                                        Margin="0,0,0,12"
                                        Style="{StaticResource SubHeaderText}"
                                        Text="💪 Thick Edges" />
                                    <Border
                                        Background="{StaticResource BgPanel}"
                                        BorderBrush="{StaticResource BorderColor}"
                                        BorderThickness="1"
                                        CornerRadius="8"
                                        Margin="0,0,0,12"
                                        Padding="8">
                                        <Image
                                            Height="220"
                                            Stretch="Uniform"
                                            x:Name="ThickImg" />
                                    </Border>
                                    <Button
                                        Click="SelectThick_Click"
                                        Content="✓ Выбрать"
                                        Style="{StaticResource BtnBlue}" />
                                </StackPanel>
                            </Border>

                            <!--  Laplacian  -->
                            <Border
                                Background="{StaticResource BgCard}"
                                BorderBrush="{StaticResource BorderColor}"
                                BorderThickness="1"
                                CornerRadius="12"
                                Grid.Column="2"
                                Grid.Row="1"
                                Margin="12,0,0,16"
                                Padding="16">
                                <StackPanel>
                                    <TextBlock
                                        Margin="0,0,0,12"
                                        Style="{StaticResource SubHeaderText}"
                                        Text="🎯 Laplacian Edges" />
                                    <Border
                                        Background="{StaticResource BgPanel}"
                                        BorderBrush="{StaticResource BorderColor}"
                                        BorderThickness="1"
                                        CornerRadius="8"
                                        Margin="0,0,0,12"
                                        Padding="8">
                                        <Image
                                            Height="220"
                                            Stretch="Uniform"
                                            x:Name="LaplacianImg" />
                                    </Border>
                                    <Button
                                        Click="SelectLaplacian_Click"
                                        Content="✓ Выбрать"
                                        Style="{StaticResource BtnBlue}" />
                                </StackPanel>
                            </Border>

                            <!--  Object Contours  -->
                            <Border
                                Background="{StaticResource BgCard}"
                                BorderBrush="{StaticResource BorderColor}"
                                BorderThickness="1"
                                CornerRadius="12"
                                Grid.Column="0"
                                Grid.Row="2"
                                Margin="0,0,12,0"
                                Padding="16">
                                <StackPanel>
                                    <TextBlock
                                        Margin="0,0,0,12"
                                        Style="{StaticResource SubHeaderText}"
                                        Text="🎨 Object Contours" />
                                    <Border
                                        Background="{StaticResource BgPanel}"
                                        BorderBrush="{StaticResource BorderColor}"
                                        BorderThickness="1"
                                        CornerRadius="8"
                                        Margin="0,0,0,12"
                                        Padding="8">
                                        <Image
                                            Height="220"
                                            Stretch="Uniform"
                                            x:Name="ContoursImg" />
                                    </Border>
                                    <Button
                                        Click="SelectContours_Click"
                                        Content="✓ Выбрать"
                                        Style="{StaticResource BtnBlue}" />
                                </StackPanel>
                            </Border>

                            <!--  High Contrast  -->
                            <Border
                                Background="{StaticResource BgCard}"
                                BorderBrush="{StaticResource BorderColor}"
                                BorderThickness="1"
                                CornerRadius="12"
                                Grid.Column="1"
                                Grid.Row="2"
                                Margin="6,0,6,0"
                                Padding="16">
                                <StackPanel>
                                    <TextBlock
                                        Margin="0,0,0,12"
                                        Style="{StaticResource SubHeaderText}"
                                        Text="⚫⚪ High Contrast" />
                                    <Border
                                        Background="{StaticResource BgPanel}"
                                        BorderBrush="{StaticResource BorderColor}"
                                        BorderThickness="1"
                                        CornerRadius="8"
                                        Margin="0,0,0,12"
                                        Padding="8">
                                        <Image
                                            Height="220"
                                            Stretch="Uniform"
                                            x:Name="HighContrastImg" />
                                    </Border>
                                    <Button
                                        Click="SelectHighContrast_Click"
                                        Content="✓ Выбрать"
                                        Style="{StaticResource BtnBlue}" />
                                </StackPanel>
                            </Border>
                        </Grid>
                    </StackPanel>
                </ScrollViewer>

                <!--  Bottom Progress Bar  -->
                <Border
                    Background="{StaticResource BgPanel}"
                    BorderBrush="{StaticResource BorderColor}"
                    BorderThickness="0,1,0,0"
                    CornerRadius="0,0,12,12"
                    Grid.Row="2"
                    Padding="24,16">
                    <StackPanel>
                        <TextBlock
                            Margin="0,0,0,8"
                            Style="{StaticResource LabelText}"
                            Text="Прогресс обработки" />
                        <ProgressBar
                            Background="{StaticResource BgCard}"
                            BorderBrush="{StaticResource BorderColor}"
                            BorderThickness="1"
                            Height="32"
                            x:Name="ProcessingProgress" />
                    </StackPanel>
                </Border>
            </Grid>
        </Border>
    </Border>
</Window>